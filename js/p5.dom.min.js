!function(t,e){"function"==typeof define&&define.amd?define("p5.dom",["p5"],function(t){e(t)}):e("object"==typeof exports?require("../p5"):t.p5)}(this,function(t){function e(e){return"VIDEO"===e.tagName||"AUDIO"===e.tagName?new t.MediaElement(e):new t.Element(e)}function n(e,n,i){var o=n._userNode?n._userNode:document.body;o.appendChild(e);var r=i?new t.MediaElement(e):new t.Element(e);return n._elements.push(r),r}function i(t,e,i,o){var r=document.createElement(e);"string"==typeof i&&(i=[i]);for(var s=0;s<i.length;s++){var a=document.createElement("source");a.src=i[s],r.appendChild(a)}"undefined"!=typeof o&&r.addEventListener("canplaythrough",function(){o()});var l=n(r,t,!0);return l.loadedmetadata=!1,r.addEventListener("loadedmetadata",function(){l.width=r.videoWidth,l.height=r.videoHeight,l.loadedmetadata=!0}),l}t.prototype.getElement=function(t){var n=document.getElementById(t);return n?e(n):null},t.prototype.getElements=function(t){var n=[],i=document.getElementsByClassName(t);if(i)for(var o=0;o<i.length;o++){var r=e(i[o]);n.push(r)}return n},t.prototype.removeElements=function(){for(var t=0;t<this._elements.length;t++)this._elements[t].elt instanceof HTMLCanvasElement||this._elements[t].remove()};var o=["div","p","span"];o.forEach(function(e){var i="create"+e.charAt(0).toUpperCase()+e.slice(1);t.prototype[i]=function(t){var i=document.createElement(e);return i.innerHTML=void 0===typeof t?"":t,n(i,this)}}),t.prototype.createImg=function(t,e){var i=document.createElement("img");return i.src=t,"undefined"!=typeof e&&(i.alt=e),n(i,this)},t.prototype.createA=function(t,e,i){var o=document.createElement("a");return o.href=t,o.innerHTML=e,i&&(o.target=i),n(o,this)},t.prototype.createSlider=function(t,e,i,o){var r=document.createElement("input");return r.type="range",r.min=t,r.max=e,o&&(r.step=o),i&&(r.value=i),n(r,this)},t.prototype.createButton=function(t,e){var i=document.createElement("button");return i.innerHTML=t,i.value=e,e&&(i.value=e),n(i,this)},t.prototype.createInput=function(t){var e=document.createElement("input");return e.type="text",t&&(e.value=t),n(e,this)},t.prototype.createFileInput=function(e,i){function o(n){function i(n){var i=new t.File(n);return function(t){i.data=t.target.result,e(i)}}for(var o=n.target.files,r=0;r<o.length;r++){var s=o[r],a=new FileReader;a.onload=i(s),"text"===s.type?a.readAsText(s):a.readAsDataURL(s)}}if(window.File&&window.FileReader&&window.FileList&&window.Blob){var r=document.createElement("input");return r.type="file",i&&(r.multiple="multiple"),r.addEventListener("change",o,!1),n(r,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},t.prototype.createVideo=function(t,e){return i(this,"video",t,e)},t.prototype.createAudio=function(t,e){return i(this,"audio",t,e)},t.prototype.VIDEO="video",t.prototype.AUDIO="audio",navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t.prototype.createCapture=function(){for(var e,i,o=!0,r=!0,s=0;s<arguments.length;s++)arguments[s]===t.prototype.VIDEO?r=!1:arguments[s]===t.prototype.AUDIO?o=!1:"object"==typeof arguments[s]?e=arguments[s]:"function"==typeof arguments[s]&&(i=arguments[s]);if(!navigator.getUserMedia)throw"getUserMedia not supported in this browser";var a=document.createElement("video");e||(e={video:o,audio:r}),navigator.getUserMedia(e,function(t){a.src=window.URL.createObjectURL(t),a.play(),i&&i(t)},function(t){console.log(t)});var l=n(a,this,!0);return l.loadedmetadata=!1,a.addEventListener("loadedmetadata",function(){l.width=a.videoWidth,l.height=a.videoHeight,l.loadedmetadata=!0}),l},t.prototype.createElement=function(t,e){var i=document.createElement(t);return"undefined"!=typeof e&&(i.innerHTML=e),n(i,this)},t.Element.prototype.addClass=function(t){return this.elt.className=this.elt.className?this.elt.className+" "+t:t,this},t.Element.prototype.removeClass=function(t){var e=new RegExp("(?:^|\\s)"+t+"(?!\\S)");return this.elt.className=this.elt.className.replace(e,""),this.elt.className=this.elt.className.replace(/^\s+|\s+$/g,""),this},t.Element.prototype.child=function(e){return"string"==typeof e?e=document.getElementById(e):e instanceof t.Element&&(e=e.elt),this.elt.appendChild(e),this},t.Element.prototype.html=function(t){return"undefined"!=typeof t?(this.elt.innerHTML=t,this):this.elt.innerHTML},t.Element.prototype.position=function(t,e){return this.elt.style.position="absolute",this.elt.style.left=t+"px",this.elt.style.top=e+"px",this},t.Element.prototype.style=function(t,e){if("undefined"==typeof e)for(var n=t.split(";"),i=0;i<n.length;i++){var o=n[i].split(":");o[0]&&o[1]&&(this.elt.style[o[0].trim()]=o[1].trim())}else this.elt.style[t]=e;return this},t.Element.prototype.attribute=function(t,e){return"undefined"==typeof e?this.elt.getAttribute(t):(this.elt.setAttribute(t,e),this)},t.Element.prototype.value=function(){return arguments.length>0?(this.elt.value=arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},t.Element.prototype.show=function(){return this.elt.style.display="block",this},t.Element.prototype.hide=function(){return this.elt.style.display="none",this},t.Element.prototype.size=function(e,n){var i=e,o=n,r=t.prototype.AUTO;if(i!==r||o!==r){if(i===r?i=n*this.width/this.height:o===r&&(o=e*this.height/this.width),this.elt instanceof HTMLCanvasElement){var s={},a=this.elt.getContext("2d");for(var l in a)s[l]=a[l];this.elt.setAttribute("width",i*this._pInst._pixelDensity),this.elt.setAttribute("height",o*this._pInst._pixelDensity),this.elt.setAttribute("style","width:"+i+"px !important; height:"+o+"px !important;"),this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity);for(var l in s)this.elt.getContext("2d")[l]=s[l]}else this.elt.style.width=i+"px !important",this.elt.style.height=o+"px !important",this.elt.width=i,this.elt.height=o;this.elt.style.overflow="hidden",this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},t.Element.prototype.remove=function(){for(var t in this._events)this.elt.removeEventListener(t,this._events[t]);this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt),delete this},t.MediaElement=function(e,n){t.Element.call(this,e,n)},t.MediaElement.prototype=Object.create(t.Element.prototype),t.MediaElement.prototype.play=function(){return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),this.elt.play(),this},t.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},t.MediaElement.prototype.pause=function(){return this.elt.pause(),this},t.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},t.MediaElement.prototype.noLoop=function(){return this.elt.setAttribute("loop",!1),this},t.MediaElement.prototype.autoplay=function(t){return this.elt.setAttribute("autoplay",t),this},t.MediaElement.prototype.volume=function(t){return"undefined"==typeof t?this.elt.volume:void(this.elt.volume=t)},t.MediaElement.prototype.time=function(t){return"undefined"==typeof t?this.elt.currentTime:void(this.elt.currentTime=t)},t.MediaElement.prototype.duration=function(){return this.elt.duration},t.MediaElement.prototype.pixels=[],t.MediaElement.prototype.loadPixels=function(){return this.loadedmetadata&&(this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d")),this.drawingContext.drawImage(this.elt,0,0,this.width,this.height),t.prototype.loadPixels.call(this)),this},t.MediaElement.prototype.updatePixels=function(e,n,i,o){return this.loadedmetadata&&t.prototype.updatePixels.call(this,e,n,i,o),this},t.MediaElement.prototype.get=function(e,n,i,o){return this.loadedmetadata?t.prototype.get.call(this,e,n,i,o):[0,0,0,255]},t.MediaElement.prototype.set=function(e,n,i){this.loadedmetadata&&t.prototype.set.call(this,e,n,i)}});